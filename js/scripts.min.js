function loaded(){var e=new TimelineMax,t=new TimelineMax({repeat:-1,delay:10});$("#loading-mask").show(),TweenMax.set(".terrain.left",{attr:{viewBox:"10 -50 50 50"}}),TweenMax.set(".terrain.right",{attr:{viewBox:"-10 -50 50 50"}}),TweenMax.set(".tree:not(#logo svg) path:not(.trunk,.short)",{strokeDasharray:"12px",strokeDashoffset:"12px"}),TweenMax.set(".tree:not(#logo svg) path.short",{strokeDasharray:"6px",strokeDashoffset:"6px"}),$("#loading-mask").hide(),e.staggerFrom(".terrain",1,{onStart:animateTerrain,onStartParams:["{self}"]},-.1).from(".intro-text",1,{css:{autoAlpha:0,y:"-100vh"},ease:Power2.easeOut},.5);var o=.35,a=4;$(".title-overlay").each(function(e,r){t.to(r,o,{opacity:0,ease:Linear.easeNone}).to(r,o,{opacity:1,ease:Linear.easeNone},"+="+(o+a))});var r=["110","90","70","50","30"];$(".intro").hasClass("project-intro")&&(r=["220","180","140","100","60"]),window.addEventListener("scroll",function(e){for(var t=this.pageYOffset/$(window).height(),o=1;o<=5;o++){speed=r[o-1];var a=t*speed;$(".layer"+o).attr("style","transform: translate(0%, "+a+"%)")}}),$("#portfolio .grid").masonry({itemSelector:".grid-item",fitWidth:!0,columnWidth:".grid-sizer",gutter:".gutter-sizer"}),$(".tree:not(#logo svg) .trunk").click(shakeTree).hover(shakeTree),$("#logo").on("mouseenter focus",function(e){shakeTree(e,$("#logo .trunk"))}),$("#intro-btn").click(function(e){scroll(e,$("#portfolio").offset().top)}),$("#to-top-btn").click(function(e){scroll(e,0)}),$("body > header > nav a").click(function(e){if("home"===$("body")[0].id){var t=0;"#top"!=$(this).data("tag")&&(t=$($(this).data("tag")).offset().top),scroll(e,t)}}),$("input, textarea").on("invalid",function(e){$(this).addClass("error")}).blur(function(e){this.checkValidity()}),$("#link-github").hover(function(){onFooterHover(5,"github.com/")},offFooterHover),$("#link-codepen").hover(function(){onFooterHover(5,"codepen.io/")},offFooterHover),$("#link-linkedin").hover(function(){onFooterHover(7,"linkedin.com/in/")},offFooterHover),$("#link-email").hover(function(){onFooterHover(0,"me@",".com")},offFooterHover)}function animateTerrain(e){var t=e.target,o="0 0 50 50",a=$(".tree",t);TweenMax.to($(t),1,{attr:{viewBox:o},ease:Power1.easeOut}),a.length>0&&TweenMax.staggerFrom(a,1,{onStart:animateTree,onStartParams:["{self}"]},0)}function animateTree(e){var t=e.target,o=$("path:not(.trunk)",t),a=$("path.left",t),r=$("path.right",t),n=new TimelineMax;TweenMax.set(a,{rotation:-20,transformOrigin:"top right"}),TweenMax.set(r,{rotation:20}),n.from($(t),.75,{attr:{viewBox:"15 -40 20 40"},ease:Back.easeOut},.8).add(TweenMax.staggerTo(o,.5,{strokeDashoffset:"0px",ease:Power1.easeOut},.03),"-=0.25").add(TweenMax.staggerTo(o,2,{rotation:0,ease:Elastic.easeOut},.03),"-=1.25")}function shakeTree(e,t){var o,a,r=new TimelineMax;void 0!==t?(o=$("~path.left",t),a=$("~path.right",t)):(o=$("~path.left",this),a=$("~path.right",this)),r.add(TweenMax.staggerTo(o,.1,{rotation:-5,ease:Power1.easeOut},.03),0).add(TweenMax.staggerTo(a,.1,{rotation:5,ease:Power1.easeOut},.03),0).add(TweenMax.staggerTo(o,2,{rotation:0,ease:Elastic.easeOut},.03),.1).add(TweenMax.staggerTo(a,2,{rotation:0,ease:Elastic.easeOut},.03),.1)}function onFooterHover(e,t,o){$("#username").css("margin-left",e+"rem"),$("#username-before").text(t).css("color","inherit"),$("#username-space").addClass("no-width"),void 0!==o?$("#username-after").text(o).css("color","inherit"):$("#username-after").css("color","transparent")}function offFooterHover(){$("#username").css("margin-left","0px"),$("#username-before").css("color","transparent"),$("#username-after").css("color","transparent"),$("#username-space").removeClass("no-width")}function scroll(e,t){var o=1500;return e.preventDefault(),$("html, body").animate({scrollTop:t},o),!1}$(document).ready(loaded);